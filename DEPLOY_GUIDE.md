# 运维审计模块部署指南

## 🚀 快速部署（5分钟）

### 步骤 1：更新后端菜单数据

```bash
cd admin-mit-backend
python update_audit_menu.py
```

**预期输出：**
```
✅ 所有租户的菜单更新完成！

📋 更新后的菜单结构:
  ├─ 运维审计 (/audit)
    ├─ 操作日志 (/audit/operations)
    ├─ 主机审计 (/audit/hosts)
```

### 步骤 2：构建前端

```bash
cd admin-mit-ui
npm run build
```

### 步骤 3：部署

根据你的部署方式：

**Docker：**
```bash
docker-compose restart
```

**手动部署：**
```bash
# 复制构建文件到服务器
# 重启服务
```

### 步骤 4：验证

1. 打开应用
2. 清除浏览器缓存（Ctrl+Shift+R）
3. 查看左侧导航栏
4. 确认"运维审计"菜单显示
5. 测试功能

## ✅ 验证清单

### 导航栏
- [ ] 显示"运维审计"菜单
- [ ] 图标为盾牌（Shield）
- [ ] 展开显示两个子菜单
- [ ] "主机运维"下没有"主机审计"

### 操作日志
- [ ] 页面正常加载
- [ ] 统计卡片显示
- [ ] 日志列表正常
- [ ] 筛选功能正常
- [ ] 导出功能正常

### 主机审计
- [ ] 页面正常加载
- [ ] 主机选择正常
- [ ] 统计卡片显示
- [ ] 审计日志列表正常
- [ ] 详情展开正常
- [ ] 清理功能正常

### 兼容性
- [ ] 旧路径 /logs 重定向正常
- [ ] 深色模式正常
- [ ] 响应式布局正常

## 🔧 故障排查

### 问题：菜单不显示

**解决方案：**
1. 检查后端更新脚本是否执行成功
2. 清除浏览器缓存
3. 检查数据库菜单数据
4. 重启后端服务

### 问题：页面无法访问

**解决方案：**
1. 检查前端构建是否成功
2. 确认路由配置正确
3. 查看浏览器控制台错误
4. 检查权限配置

### 问题：样式不正常

**解决方案：**
1. 清除浏览器缓存
2. 硬刷新页面
3. 检查 CSS 文件是否加载
4. 查看浏览器控制台警告

## 📞 需要帮助？

查看详细文档：
- [导航最终更新](NAVIGATION_FINAL_UPDATE.md)
- [菜单更新指南](MENU_UPDATE_GUIDE.md)
- [快速更新指南](UPDATE_MENU_QUICK_GUIDE.md)

---

**预计时间**：5 分钟  
**难度**：简单  
**风险**：低（可回滚）
